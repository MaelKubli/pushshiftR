ungroup() %>%
gather(consensus, value, -parent_id)
aita_data %>%
mutate(YTA = str_detect(body, "YTA"),
NTA = str_detect(body, "NTA"),
ESH = str_detect(body, "ESH"),
NAH = str_detect(body, "NAH"),
total = YTA + NTA + ESH + NAH) %>%
group_by(parent_id) %>%
filter(n() > 10) %>%
summarise(YTA = (sum(YTA) + sum(ESH)) / sum(total),
NTA = (sum(NTA) + sum(NAH)) / sum(total)) %>%
ungroup() %>%
gather(consensus, value, -parent_id) %>%
filter(value > 0.5) %>%
ggplot(aes(x = value, group = consensus, fill = consensus)) +
geom_density(alpha = 0.3)
aita_data %>%
mutate(YTA = str_detect(body, "YTA"),
NTA = str_detect(body, "NTA"),
ESH = str_detect(body, "ESH"),
NAH = str_detect(body, "NAH"),
total = YTA + NTA + ESH + NAH) %>%
group_by(parent_id) %>%
filter(n() > 10) %>%
summarise(YTA = (sum(YTA) + sum(ESH)) / sum(total),
NTA = (sum(NTA) + sum(NAH)) / sum(total)) %>%
ungroup() %>%
gather(consensus, value, -parent_id) %>%
filter(value > 0.5) %>%
ggplot(aes(x = value, group = consensus, fill = consensus)) +
geom_density(alpha = 0.3) +
coord_cartesian(expand = 0)
aita_data %>%
mutate(YTA = str_detect(body, "YTA"),
NTA = str_detect(body, "NTA"),
ESH = str_detect(body, "ESH"),
NAH = str_detect(body, "NAH"),
total = YTA + NTA + ESH + NAH) %>%
group_by(parent_id) %>%
filter(n() > 10) %>%
summarise(YTA = (sum(YTA) + sum(ESH)) / sum(total),
NTA = (sum(NTA) + sum(NAH)) / sum(total)) %>%
ungroup() %>%
gather(consensus, value, -parent_id) %>%
filter(value > 0.5) %>%
ggplot(aes(x = value, group = consensus, fill = consensus)) +
geom_density(alpha = 0.3) +
coord_cartesian(expand = 0) +
theme_minimal()
x <- rnorm(1000)
ggplot(x) + geom_density()
library(tidyverse)
ggplot(x) + geom_density()
ggplot(tibble(x), aes(x=x)) + geom_density()
ggplot(tibble(x), aes(x=x, fill = "blue")) + geom_density()
ggplot(tibble(x), aes(x=x, fill = "blue", colour = "blue")) + geom_density()
ggplot(tibble(x), aes(x=x, fill = "blue", colour = "red")) + geom_density()
ggsave("test.png",
dpi = 300,
units = "in",
width = w, height = h,
type=cairo-png)
ggsave("test.png",
dpi = 300,
units = "in",
width = 1024, height = 576,
type=cairo-png)
ggsave("test.png",
dpi = 300,
units = "in",
width = 10, height = 5,
type=cairo-png)
ggsave("test.png",
dpi = 300,
units = "in",
width = 10, height = 5,
type="cairo-png")
ggsave("test2.png",
dpi = 300,
units = "in",
width = 10, height = 5)
devtools::load_all(".")
aita_data <- getPushshiftDataRecursive(postType = "comment",
size = 1000,
after = "1553644800",
subreddit = "AmItheAsshole",
nest_level = 1)
devtools::load_all(".")
aita_data <- getPushshiftDataRecursive(postType = "comment",
size = 1000,
after = "1553644800",
subreddit = "AmItheAsshole",
nest_level = 1)
tibble(names(aita_data))
tibble(names = names(aita_data))
.?tibble
?tibble
aita_data %>% filter(FALSE)
aita_data %>%
mutate(YTA = str_detect(body, "YTA"),
NTA = str_detect(body, "NTA"),
ESH = str_detect(body, "ESH"),
NAH = str_detect(body, "NAH"),
total = YTA + NTA + ESH + NAH) %>%
group_by(parent_id) %>%
filter(n() > 10) %>%
summarise(YTA = (sum(YTA) + sum(ESH)) / sum(total),
NTA = (sum(NTA) + sum(NAH)) / sum(total)) %>%
ungroup() %>%
gather(consensus, value, -parent_id) %>%
filter(value > 0.5) %>%
ggplot(aes(x = value, group = consensus, fill = consensus)) +
geom_density(alpha = 0.3) +
coord_cartesian(expand = 0) +
theme_minimal()
aita_data %>%
mutate(YTA = str_detect(body, "YTA"),
NTA = str_detect(body, "NTA"),
ESH = str_detect(body, "ESH"),
NAH = str_detect(body, "NAH"),
total = YTA + NTA + ESH + NAH) %>%
group_by(parent_id) %>%
filter(sum(total) > 10) %>%
summarise(YTA = (sum(YTA) + sum(ESH)) / sum(total),
NTA = (sum(NTA) + sum(NAH)) / sum(total)) %>%
ungroup() %>%
gather(consensus, value, -parent_id) %>%
filter(value > 0.5) %>%
ggplot(aes(x = value, group = consensus, fill = consensus)) +
geom_density(alpha = 0.3) +
coord_cartesian(expand = 0) +
theme_minimal()
aita_data %>%
mutate(YTA = str_detect(body, "YTA"),
NTA = str_detect(body, "NTA"),
ESH = str_detect(body, "ESH"),
NAH = str_detect(body, "NAH"),
total = YTA + NTA + ESH + NAH) %>%
group_by(parent_id) %>%
filter(sum(total) > 10) %>%
summarise(YTA = (sum(YTA) + sum(ESH)) / sum(total),
NTA = (sum(NTA) + sum(NAH)) / sum(total)) %>%
ungroup()
aita_data %>%
mutate(YTA = str_detect(body, "YTA"),
NTA = str_detect(body, "NTA"),
ESH = str_detect(body, "ESH"),
NAH = str_detect(body, "NAH"),
total = YTA + NTA + ESH + NAH) %>%
group_by(parent_id) %>%
filter(sum(total) > 10) %>%
summarise(YTA = (sum(YTA) + sum(ESH)) / sum(total),
NTA = (sum(NTA) + sum(NAH)) / sum(total)) %>%
ungroup() %>%
#gather(consensus, value, -parent_id) %>%
#filter(value > 0.5) %>%
#ggplot(aes(x = , group = consensus, fill = consensus)) +
ggplot(aes(x = YTA)) +
geom_density(alpha = 0.3) +
coord_cartesian(expand = 0) +
theme_minimal()
aita_data %>%
mutate(YTA = str_detect(body, "YTA"),
NTA = str_detect(body, "NTA"),
ESH = str_detect(body, "ESH"),
NAH = str_detect(body, "NAH"),
total = YTA + NTA + ESH + NAH) %>%
group_by(parent_id) %>%
filter(sum(total) > 10) %>%
summarise(YTA = (sum(YTA) + sum(ESH)) / sum(total),
NTA = (sum(NTA) + sum(NAH)) / sum(total)) %>%
ungroup() %>%
#gather(consensus, value, -parent_id) %>%
#filter(value > 0.5) %>%
#ggplot(aes(x = , group = consensus, fill = consensus)) +
ggplot(aes(x = NTA)) +
geom_density(alpha = 0.3) +
coord_cartesian(expand = 0) +
theme_minimal()
aita_data %>%
mutate(YTA = str_detect(body, "YTA"),
NTA = str_detect(body, "NTA"),
ESH = str_detect(body, "ESH"),
NAH = str_detect(body, "NAH"),
total = YTA + NTA + ESH + NAH) %>%
group_by(parent_id) %>%
filter(sum(total) > 10) %>%
summarise(YTA = (sum(YTA) + sum(ESH)) / sum(total),
NTA = (sum(NTA) + sum(NAH)) / sum(total)) %>%
ungroup() %>%
#gather(consensus, value, -parent_id) %>%
#filter(value > 0.5) %>%
#ggplot(aes(x = , group = consensus, fill = consensus)) +
ggplot(aes(x = NTA)) +
geom_density(alpha = 0.3, fill = 1) +
coord_cartesian(expand = 0) +
theme_minimal()
aita_data %>%
mutate(YTA = str_detect(body, "YTA"),
NTA = str_detect(body, "NTA"),
ESH = str_detect(body, "ESH"),
NAH = str_detect(body, "NAH"),
total = YTA + NTA + ESH + NAH) %>%
group_by(parent_id) %>%
filter(sum(total) > 10) %>%
summarise(YTA = (sum(YTA) + sum(ESH)) / sum(total),
NTA = (sum(NTA) + sum(NAH)) / sum(total)) %>%
ungroup() %>%
gather(consensus, value, -parent_id) %>%
filter(value > 0.5) %>%
ggplot(aes(x = , group = consensus, fill = consensus)) +
# ggplot(aes(x = NTA)) +
geom_density(alpha = 0.3, fill = 1) +
coord_cartesian(expand = 0) +
theme_minimal()
aita_data %>%
mutate(YTA = str_detect(body, "YTA"),
NTA = str_detect(body, "NTA"),
ESH = str_detect(body, "ESH"),
NAH = str_detect(body, "NAH"),
total = YTA + NTA + ESH + NAH) %>%
group_by(parent_id) %>%
filter(sum(total) > 10) %>%
summarise(YTA = (sum(YTA) + sum(ESH)) / sum(total),
NTA = (sum(NTA) + sum(NAH)) / sum(total)) %>%
ungroup() %>%
gather(consensus, value, -parent_id) %>%
filter(value > 0.5) %>%
ggplot(aes(x = value, group = consensus, fill = consensus)) +
# ggplot(aes(x = NTA)) +
geom_density(alpha = 0.3, fill = 1) +
coord_cartesian(expand = 0) +
theme_minimal()
aita_data %>%
mutate(YTA = str_detect(body, "YTA"),
NTA = str_detect(body, "NTA"),
ESH = str_detect(body, "ESH"),
NAH = str_detect(body, "NAH"),
total = YTA + NTA + ESH + NAH) %>%
group_by(parent_id) %>%
filter(sum(total) > 10) %>%
summarise(YTA = (sum(YTA) + sum(ESH)) / sum(total),
NTA = (sum(NTA) + sum(NAH)) / sum(total)) %>%
ungroup() %>%
gather(consensus, value, -parent_id) %>%
# filter(value > 0.5) %>%
ggplot(aes(x = value, group = consensus, fill = consensus)) +
# ggplot(aes(x = NTA)) +
geom_density(alpha = 0.3, fill = 1) +
coord_cartesian(expand = 0) +
theme_minimal()
aita_data %>%
mutate(YTA = str_detect(body, "YTA"),
NTA = str_detect(body, "NTA"),
ESH = str_detect(body, "ESH"),
NAH = str_detect(body, "NAH"),
total = YTA + NTA + ESH + NAH) %>%
group_by(parent_id) %>%
filter(sum(total) > 10) %>%
summarise(YTA = (sum(YTA) + sum(ESH)) / sum(total),
NTA = (sum(NTA) + sum(NAH)) / sum(total)) %>%
ungroup() %>%
gather(consensus, value, -parent_id) %>%
# filter(value > 0.5) %>%
ggplot(aes(x = value, group = consensus, fill = consensus)) +
# ggplot(aes(x = NTA)) +
geom_density(alpha = 0.3) +
coord_cartesian(expand = 0) +
theme_minimal()
aita_data %>%
mutate(YTA = str_detect(body, "YTA"),
NTA = str_detect(body, "NTA"),
ESH = str_detect(body, "ESH"),
NAH = str_detect(body, "NAH"),
total = YTA + NTA + ESH + NAH) %>%
group_by(parent_id) %>%
filter(sum(total) > 100) %>%
summarise(YTA = (sum(YTA) + sum(ESH)) / sum(total),
NTA = (sum(NTA) + sum(NAH)) / sum(total)) %>%
ungroup() %>%
gather(consensus, value, -parent_id) %>%
# filter(value > 0.5) %>%
ggplot(aes(x = value, group = consensus, fill = consensus)) +
# ggplot(aes(x = NTA)) +
geom_density(alpha = 0.3) +
coord_cartesian(expand = 0) +
theme_minimal()
aita_data %>%
mutate(YTA = str_detect(body, "YTA"),
NTA = str_detect(body, "NTA"),
ESH = str_detect(body, "ESH"),
NAH = str_detect(body, "NAH"),
total = YTA + NTA + ESH + NAH) %>%
group_by(parent_id) %>%
filter(sum(total) > 1000) %>%
summarise(YTA = (sum(YTA) + sum(ESH)) / sum(total),
NTA = (sum(NTA) + sum(NAH)) / sum(total)) %>%
ungroup() %>%
gather(consensus, value, -parent_id) %>%
# filter(value > 0.5) %>%
ggplot(aes(x = value, group = consensus, fill = consensus)) +
# ggplot(aes(x = NTA)) +
geom_density(alpha = 0.3) +
coord_cartesian(expand = 0) +
theme_minimal()
aita_data %>%
mutate(YTA = str_detect(body, "YTA"),
NTA = str_detect(body, "NTA"),
ESH = str_detect(body, "ESH"),
NAH = str_detect(body, "NAH"),
total = YTA + NTA + ESH + NAH) %>%
group_by(parent_id) %>%
filter(sum(total) > 100) %>%
summarise(YTA = (sum(YTA) + sum(ESH)) / sum(total),
NTA = (sum(NTA) + sum(NAH)) / sum(total)) %>%
ungroup() %>%
gather(consensus, value, -parent_id) %>%
# filter(value > 0.5) %>%
ggplot(aes(x = value, group = consensus, fill = consensus)) +
# ggplot(aes(x = NTA)) +
geom_density(alpha = 0.3) +
coord_cartesian(expand = 0) +
theme_minimal()
aita_data %>%
mutate(YTA = str_detect(body, "YTA"),
NTA = str_detect(body, "NTA"),
ESH = str_detect(body, "ESH"),
NAH = str_detect(body, "NAH"),
total = YTA + NTA + ESH + NAH) %>%
group_by(parent_id) %>%
filter(sum(total) > 100) %>%
summarise(YTA = (sum(YTA) + sum(ESH)) / sum(total),
NTA = (sum(NTA) + sum(NAH)) / sum(total)) %>%
ungroup() %>%
# gather(consensus, value, -parent_id) %>%
# filter(value > 0.5) %>%
# ggplot(aes(x = value, group = consensus, fill = consensus)) +
ggplot(aes(x = NTA)) +
geom_density(alpha = 0.3) +
coord_cartesian(expand = 0) +
theme_minimal()
aita_data %>%
mutate(YTA = str_detect(body, "YTA"),
NTA = str_detect(body, "NTA"),
ESH = str_detect(body, "ESH"),
NAH = str_detect(body, "NAH"),
total = YTA + NTA + ESH + NAH) %>%
group_by(parent_id) %>%
filter(sum(total) > 100) %>%
summarise(YTA = (sum(YTA) + sum(ESH)) / sum(total),
NTA = (sum(NTA) + sum(NAH)) / sum(total)) %>%
ungroup() %>%
# gather(consensus, value, -parent_id) %>%
# filter(value > 0.5) %>%
# ggplot(aes(x = value, group = consensus, fill = consensus)) +
ggplot(aes(x = YTA)) +
geom_density(alpha = 0.3) +
coord_cartesian(expand = 0) +
theme_minimal()
aita_data <- getPushshiftDataRecursive(postType = "comment",
size = 1000,
after = "1546300800",
subreddit = "AmItheAsshole",
nest_level = 1)
aita_data %>%
mutate(YTA = str_detect(body, "YTA"),
NTA = str_detect(body, "NTA"),
ESH = str_detect(body, "ESH"),
NAH = str_detect(body, "NAH"),
total = YTA + NTA + ESH + NAH) %>%
group_by(parent_id) %>%
filter(sum(total) > 100) %>%
summarise(YTA = (sum(YTA) + sum(ESH)) / sum(total),
NTA = (sum(NTA) + sum(NAH)) / sum(total)) %>%
ungroup() %>%
# gather(consensus, value, -parent_id) %>%
# filter(value > 0.5) %>%
# ggplot(aes(x = value, group = consensus, fill = consensus)) +
ggplot(aes(x = YTA)) +
geom_density(alpha = 0.3) +
coord_cartesian(expand = 0) +
theme_minimal()
aita_data %>%
mutate(YTA = str_detect(body, "YTA"),
NTA = str_detect(body, "NTA"),
ESH = str_detect(body, "ESH"),
NAH = str_detect(body, "NAH"),
total = YTA + NTA + ESH + NAH) %>%
group_by(parent_id) %>%
filter(sum(total) > 100) %>%
summarise(YTA = (sum(YTA) + sum(ESH)) / sum(total),
NTA = (sum(NTA) + sum(NAH)) / sum(total)) %>%
ungroup() %>%
gather(consensus, value, -parent_id) %>%
filter(value > 0.5) %>%
ggplot(aes(x = value, group = consensus, fill = consensus)) +
# ggplot(aes(x = YTA)) +
geom_density(alpha = 0.3) +
coord_cartesian(expand = 0) +
theme_minimal()
write_csv(aita_data, "~/../google-drive/Statistics Articles/Am_I_the_asshole/data/jan-mar-2019.csv")
aita_data %>%
mutate(YTA = str_detect(body, "YTA"),
NTA = str_detect(body, "NTA"),
ESH = str_detect(body, "ESH"),
NAH = str_detect(body, "NAH"),
total = YTA + NTA + ESH + NAH) %>%
group_by(parent_id) %>%
filter(sum(total) > 100) %>%
summarise(YTA = (sum(YTA) + sum(ESH)) / sum(total),
NTA = (sum(NTA) + sum(NAH)) / sum(total)) %>%
ungroup() %>%
gather(consensus, value, -parent_id) %>%
filter(value > 0.5) %>%
ggplot(aes(x = value, group = consensus, fill = consensus)) +
# ggplot(aes(x = YTA)) +
geom_density(alpha = 0.3) +
coord_cartesian(expand = 0) +
theme_minimal()
aita_data %>%
mutate(YTA = str_detect(body, "YTA"),
NTA = str_detect(body, "NTA"),
ESH = str_detect(body, "ESH"),
NAH = str_detect(body, "NAH"),
total = YTA + NTA + ESH + NAH) %>%
group_by(parent_id) %>%
filter(sum(total) > 100) %>%
summarise(YTA = (sum(YTA) + sum(ESH)) / sum(total),
NTA = (sum(NTA) + sum(NAH)) / sum(total)) %>%
ungroup() %>%
gather(consensus, value, -parent_id) %>%
filter(value > 0.5) %>%
ggplot(aes(x = value, group = consensus, fill = consensus)) +
# ggplot(aes(x = YTA)) +
geom_density(alpha = 0.3) +
coord_cartesian(expand = 0) +
theme_minimal() +
facet_grid(.~consensus)
aita_data %>%
mutate(YTA = str_detect(body, "YTA"),
NTA = str_detect(body, "NTA"),
ESH = str_detect(body, "ESH"),
NAH = str_detect(body, "NAH"),
total = YTA + NTA + ESH + NAH) %>%
group_by(parent_id) %>%
filter(sum(total) > 100) %>%
summarise(YTA = (sum(YTA) + sum(ESH)) / sum(total),
NTA = (sum(NTA) + sum(NAH)) / sum(total)) %>%
ungroup() %>%
# gather(consensus, value, -parent_id) %>%
# filter(value > 0.5) %>%
# ggplot(aes(x = value, group = consensus, fill = consensus)) +
ggplot(aes(x = YTA)) +
geom_density(alpha = 0.3) +
coord_cartesian(expand = 0) +
theme_minimal()
aita_data %>%
mutate(YTA = str_detect(body, "YTA"),
NTA = str_detect(body, "NTA"),
ESH = str_detect(body, "ESH"),
NAH = str_detect(body, "NAH"),
total = YTA + NTA + ESH + NAH) %>%
group_by(parent_id) %>%
filter(sum(total) > 10) %>%
summarise(YTA = (sum(YTA) + sum(ESH)) / sum(total),
NTA = (sum(NTA) + sum(NAH)) / sum(total)) %>%
ungroup() %>%
# gather(consensus, value, -parent_id) %>%
# filter(value > 0.5) %>%
# ggplot(aes(x = value, group = consensus, fill = consensus)) +
ggplot(aes(x = YTA)) +
geom_density(alpha = 0.3) +
coord_cartesian(expand = 0) +
theme_minimal()
aita_data %>%
mutate(YTA = str_detect(body, "YTA"),
NTA = str_detect(body, "NTA"),
ESH = str_detect(body, "ESH"),
NAH = str_detect(body, "NAH"),
total = YTA + NTA + ESH + NAH) %>%
group_by(parent_id) %>%
filter(sum(total) > 100) %>%
ungroup() %>% View
aita_data %>%
mutate(YTA = str_detect(body, "YTA"),
NTA = str_detect(body, "NTA"),
ESH = str_detect(body, "ESH"),
NAH = str_detect(body, "NAH"),
total = YTA + NTA + ESH + NAH) %>%
group_by(parent_id) %>%
filter(sum(total) > 100) %>%
summarise(n())
devtools::load_all(".")
aita_data %>%
mutate(YTA = str_detect(body, "YTA"),
NTA = str_detect(body, "NTA"),
ESH = str_detect(body, "ESH"),
NAH = str_detect(body, "NAH"),
total = YTA + NTA + ESH + NAH) %>%
group_by(parent_id) %>%
filter(sum(total) > 100) %>%
summarise(YTA = (sum(YTA) + sum(ESH)) / sum(total),
NTA = (sum(NTA) + sum(NAH)) / sum(total)) %>%
ungroup() %>%
# gather(consensus, value, -parent_id) %>%
# filter(value > 0.5) %>%
# ggplot(aes(x = value, group = consensus, fill = consensus)) +
ggplot(aes(x = YTA)) +
geom_density(alpha = 0.3) +
coord_cartesian(expand = 0) +
theme_minimal()
